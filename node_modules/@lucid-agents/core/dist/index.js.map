{"version":3,"sources":["../src/axllm/index.ts","../src/core/agent.ts","../src/extensions/builder.ts","../src/runtime.ts","../src/utils/utils.ts","../src/validation.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import {\n  createX402LLM,\n  type CreateX402LLMOptions,\n} from '@lucid-agents/payments';\nimport type { Hex } from 'viem';\n\nexport type AxLLMClientOptions = {\n  provider?: string;\n  model?: string;\n  apiKey?: string;\n  apiUrl?: string;\n  temperature?: number;\n  debug?: boolean;\n  env?: Record<string, string | undefined>;\n  client?: ReturnType<typeof createX402LLM>;\n  clientFactory?: () => ReturnType<typeof createX402LLM> | null;\n  x402?: CreateX402LLMOptions;\n  logger?: {\n    warn?: (message: string, error?: unknown) => void;\n  };\n};\n\nexport type AxLLMClient = {\n  ax: ReturnType<typeof createX402LLM> | null;\n  isConfigured(): boolean;\n};\n\nconst DEFAULT_PROVIDER = 'openai';\nconst DEFAULT_MODEL = 'gpt-5';\n\nexport function createAxLLMClient(\n  options: AxLLMClientOptions = {}\n): AxLLMClient {\n  const resolved = resolveOptions(options);\n  const logger = options.logger;\n\n  const axInstance = (() => {\n    if (options.client) return options.client;\n\n    const fromFactory = options.clientFactory?.();\n    if (fromFactory) return fromFactory;\n\n    try {\n      return createX402LLM(buildCreateOptions(resolved, options.x402));\n    } catch (error) {\n      logger?.warn?.(\n        `[agent-kit] failed to initialise Ax LLM client: ${\n          (error as Error).message\n        }`,\n        error\n      );\n      return null;\n    }\n  })();\n\n  return {\n    ax: axInstance,\n    isConfigured() {\n      return Boolean(axInstance);\n    },\n  };\n}\n\nfunction resolveOptions(options: AxLLMClientOptions) {\n  const env = readEnv(options.env);\n\n  const provider =\n    options.provider ??\n    env.AX_PROVIDER ??\n    env.AXLLM_PROVIDER ??\n    env.OPENAI_PROVIDER ??\n    DEFAULT_PROVIDER;\n\n  const model =\n    options.model ??\n    env.AX_MODEL ??\n    env.AXLLM_MODEL ??\n    env.OPENAI_MODEL ??\n    DEFAULT_MODEL;\n\n  const apiKey = options.apiKey ?? env.OPENAI_API_KEY;\n\n  const apiUrl =\n    options.apiUrl ?? env.AX_API_URL ?? env.AXLLM_API_URL ?? env.OPENAI_API_URL;\n\n  const temperature =\n    options.temperature ??\n    parseNumber(\n      env.AX_TEMPERATURE ?? env.AXLLM_TEMPERATURE ?? env.OPENAI_TEMPERATURE\n    );\n\n  const debug =\n    options.debug ?? parseBoolean(env.AX_DEBUG ?? env.AXLLM_DEBUG) ?? false;\n\n  return { provider, model, apiKey, apiUrl, temperature, debug };\n}\n\nfunction buildCreateOptions(\n  resolved: ReturnType<typeof resolveOptions>,\n  overrides: CreateX402LLMOptions | undefined\n): CreateX402LLMOptions {\n  const x402 = overrides ? { ...overrides } : {};\n  const aiOverrides = overrides?.ai ? { ...overrides.ai } : {};\n  const aiConfigOverrides =\n    aiOverrides.config && typeof aiOverrides.config === 'object'\n      ? { ...aiOverrides.config }\n      : undefined;\n  const aiOptionOverrides =\n    aiOverrides.options && typeof aiOverrides.options === 'object'\n      ? { ...aiOverrides.options }\n      : undefined;\n\n  const finalTemperature =\n    aiConfigOverrides && 'temperature' in aiConfigOverrides\n      ? aiConfigOverrides.temperature\n      : resolved.temperature;\n\n  const finalConfig = {\n    stream: false,\n    model: aiConfigOverrides?.model ?? x402.model ?? resolved.model,\n    ...(aiConfigOverrides ?? {}),\n    ...(finalTemperature !== undefined\n      ? { temperature: finalTemperature }\n      : {}),\n  };\n\n  const finalOptions = {\n    ...(aiOptionOverrides ?? {}),\n    ...(resolved.debug ? { debug: resolved.debug } : {}),\n  };\n\n  const apiKey =\n    aiOverrides.apiKey ??\n    resolved.apiKey ??\n    (typeof process !== 'undefined' ? process.env.OPENAI_API_KEY : undefined);\n\n  if (!apiKey) {\n    throw new Error(\n      '[agent-kit] createAxLLMClient requires an OpenAI API key (set apiKey or OPENAI_API_KEY)'\n    );\n  }\n\n  const name = aiOverrides.name ?? resolved.provider;\n  const apiURL = aiOverrides.apiURL ?? resolved.apiUrl;\n\n  const finalAi = {\n    ...aiOverrides,\n    name,\n    apiKey,\n    ...(apiURL ? { apiURL } : {}),\n    config: finalConfig,\n    options: finalOptions,\n  } as NonNullable<CreateX402LLMOptions['ai']>;\n\n  const createOptions: CreateX402LLMOptions = {\n    ...x402,\n    model: x402.model ?? resolved.model,\n    ai: finalAi,\n  };\n\n  if (!createOptions.account && !createOptions.privateKey) {\n    const envPrivateKey =\n      typeof process !== 'undefined'\n        ? (process.env.PRIVATE_KEY as Hex | undefined)\n        : undefined;\n    if (envPrivateKey) {\n      createOptions.privateKey = envPrivateKey;\n    }\n  }\n\n  return createOptions;\n}\n\nfunction readEnv(\n  env: Record<string, string | undefined> | undefined\n): Record<string, string | undefined> {\n  if (env) return env;\n  if (typeof process !== 'undefined' && process?.env) {\n    return process.env as Record<string, string | undefined>;\n  }\n  return {};\n}\n\nfunction parseBoolean(value: string | undefined): boolean | undefined {\n  if (value === undefined) return undefined;\n  if (value.trim() === '') return undefined;\n  return ['1', 'true', 'yes', 'on'].includes(value.toLowerCase());\n}\n\nfunction parseNumber(value: string | undefined): number | undefined {\n  if (value === undefined) return undefined;\n  const numeric = Number.parseFloat(value);\n  return Number.isFinite(numeric) ? numeric : undefined;\n}\n","import type { AgentConfig, EntrypointDef } from '@lucid-agents/types/core';\nimport { z } from 'zod';\n\nexport class AgentCore {\n  private entrypoints = new Map<string, EntrypointDef>();\n\n  constructor(public readonly config: AgentConfig) {}\n\n  addEntrypoint<\n    TInput extends z.ZodTypeAny | undefined = z.ZodTypeAny | undefined,\n    TOutput extends z.ZodTypeAny | undefined = z.ZodTypeAny | undefined,\n  >(entrypoint: EntrypointDef<TInput, TOutput>): void {\n    if (!entrypoint.key || typeof entrypoint.key !== 'string') {\n      throw new Error('Entrypoint must include a non-empty string key');\n    }\n    this.entrypoints.set(entrypoint.key, entrypoint);\n  }\n\n  getEntrypoint(key: string): EntrypointDef | undefined {\n    return this.entrypoints.get(key);\n  }\n\n  listEntrypoints(): EntrypointDef[] {\n    return Array.from(this.entrypoints.values());\n  }\n}\n\nexport function createAgentCore(config: AgentConfig): AgentCore {\n  return new AgentCore(config);\n}\n","import { buildAgentCard } from '@lucid-agents/a2a';\nimport type {\n  AgentCardWithEntrypoints,\n  AgentMeta,\n} from '@lucid-agents/types/a2a';\nimport type {\n  AgentRuntime,\n  BuildContext,\n  EntrypointDef,\n  Extension,\n  Network,\n} from '@lucid-agents/types/core';\n\nimport { createAgentCore } from '../core/agent';\n\nexport class AgentBuilder {\n  private extensions: Extension[] = [];\n  private entrypoints: EntrypointDef[] = [];\n\n  constructor(private meta: AgentMeta) {}\n\n  use<E extends Extension>(ext: E): this {\n    this.extensions.push(ext);\n    return this;\n  }\n\n  addEntrypoint(def: EntrypointDef): this {\n    this.entrypoints.push(def);\n    return this;\n  }\n\n  async build(): Promise<AgentRuntime> {\n    // Create base agent core\n    const agent = createAgentCore({\n      meta: this.meta,\n    });\n\n    const manifestCache = new Map<string, AgentCardWithEntrypoints>();\n\n    // Build context for extensions\n    const buildContext: BuildContext = {\n      meta: this.meta,\n      runtime: {},\n    };\n\n    // Build all extension runtime slices\n    const runtimeSlices: Record<string, unknown>[] = [];\n    for (const ext of this.extensions) {\n      try {\n        const slice = ext.build(buildContext);\n        runtimeSlices.push(slice);\n      } catch (error) {\n        const errorMessage =\n          error instanceof Error ? error.message : String(error);\n        throw new Error(\n          `Extension \"${ext.name}\" failed to build: ${errorMessage}`,\n          { cause: error }\n        );\n      }\n    }\n\n    // Detect conflicts and merge runtime slices\n    const mergedRuntime: Record<string, unknown> = {};\n    const propertyOwners = new Map<string, string[]>();\n\n    for (let i = 0; i < runtimeSlices.length; i++) {\n      const slice = runtimeSlices[i];\n      const extName = this.extensions[i]?.name ?? `extension-${i}`;\n\n      for (const [key, value] of Object.entries(slice)) {\n        if (key in mergedRuntime) {\n          const owners = propertyOwners.get(key) ?? [];\n          owners.push(extName);\n          propertyOwners.set(key, owners);\n\n          throw new Error(\n            `Conflicting extensions: \"${owners.join(\n              '\" and \"'\n            )}\" both add \"${key}\" property to runtime. Extensions must not conflict.`\n          );\n        }\n\n        mergedRuntime[key] = value;\n        propertyOwners.set(key, [extName]);\n      }\n    }\n\n    const snapshotEntrypoints = (): EntrypointDef[] =>\n      agent.listEntrypoints().map(entry => ({\n        ...entry,\n        network: entry.network as Network | undefined,\n      })) as EntrypointDef[];\n\n    const listEntrypoints = () =>\n      snapshotEntrypoints().map(entry => ({\n        key: entry.key,\n        description: entry.description,\n        streaming: Boolean(entry.stream ?? entry.streaming),\n      }));\n\n    // Create runtime object with merged slices\n    const runtime = {\n      ...mergedRuntime,\n      agent,\n      entrypoints: {\n        add: (def: EntrypointDef) => {\n          if (!def.key) throw new Error('entrypoint.key required');\n\n          // Call onEntrypointAdded hooks\n          for (const ext of this.extensions) {\n            if (ext.onEntrypointAdded) {\n              try {\n                ext.onEntrypointAdded(def, runtime as AgentRuntime);\n              } catch (error) {\n                const errorMessage =\n                  error instanceof Error ? error.message : String(error);\n                throw new Error(\n                  `Extension \"${ext.name}\" hook onEntrypointAdded failed: ${errorMessage}`,\n                  { cause: error }\n                );\n              }\n            }\n          }\n\n          agent.addEntrypoint(def);\n          manifestCache.clear();\n        },\n        list: listEntrypoints,\n        snapshot: snapshotEntrypoints,\n      },\n      manifest: {\n        build: (origin: string) => {\n          const cached = manifestCache.get(origin);\n          if (cached) {\n            return cached;\n          }\n\n          // Build base A2A card\n          let card: AgentCardWithEntrypoints;\n          if (runtime.a2a) {\n            card = (runtime.a2a as any).buildCard(origin);\n          } else {\n            // Fallback if a2a extension not used - create minimal card\n            card = buildAgentCard({\n              meta: this.meta,\n              registry: snapshotEntrypoints(),\n              origin,\n            });\n          }\n\n          // Apply extension manifest hooks\n          for (const ext of this.extensions) {\n            if (ext.onManifestBuild) {\n              try {\n                card = ext.onManifestBuild(card, runtime as AgentRuntime);\n              } catch (error) {\n                const errorMessage =\n                  error instanceof Error ? error.message : String(error);\n                throw new Error(\n                  `Extension \"${ext.name}\" hook onManifestBuild failed: ${errorMessage}`,\n                  { cause: error }\n                );\n              }\n            }\n          }\n\n          manifestCache.set(origin, card);\n          return card;\n        },\n        invalidate: () => {\n          manifestCache.clear();\n        },\n      },\n    } as AgentRuntime;\n\n    // Add initial entrypoints\n    for (const entrypoint of this.entrypoints) {\n      runtime.entrypoints.add(entrypoint);\n    }\n\n    // Call onBuild hooks after runtime is fully constructed\n    // These can be async for initialization that requires async operations\n    const onBuildPromises: Promise<void>[] = [];\n    for (const ext of this.extensions) {\n      if (ext.onBuild) {\n        try {\n          const result = ext.onBuild(runtime);\n          if (result instanceof Promise) {\n            onBuildPromises.push(\n              result.catch(error => {\n                const errorMessage =\n                  error instanceof Error ? error.message : String(error);\n                throw new Error(\n                  `Extension \"${ext.name}\" hook onBuild failed: ${errorMessage}`,\n                  { cause: error }\n                );\n              })\n            );\n          }\n        } catch (error) {\n          const errorMessage =\n            error instanceof Error ? error.message : String(error);\n          throw new Error(\n            `Extension \"${ext.name}\" hook onBuild failed: ${errorMessage}`,\n            { cause: error }\n          );\n        }\n      }\n    }\n\n    // Wait for all async onBuild hooks to complete\n    if (onBuildPromises.length > 0) {\n      await Promise.all(onBuildPromises);\n    }\n\n    return runtime;\n  }\n}\n","import type { AgentMeta } from '@lucid-agents/types/a2a';\n\nimport { AgentBuilder } from './extensions/builder';\n\n/**\n * Creates a new agent builder for constructing an agent runtime with extensions.\n *\n * @example\n * ```typescript\n * const identity = identity({ trust });\n * const payments = payments({ config });\n * const a2a = a2a();\n *\n * const agent = createAgent(meta)\n *   .use(identity)\n *   .use(payments)\n *   .use(a2a)\n *   .build();\n * ```\n */\nexport function createAgent(meta: AgentMeta): AgentBuilder {\n  return new AgentBuilder(meta);\n}\n\nexport { AgentBuilder } from './extensions/builder';\n","/**\n * Checks if a value has any defined (non-null, non-undefined, non-empty) properties.\n * Generic utility for runtime validation.\n */\nexport function hasDefinedValue<T extends Record<string, unknown>>(\n  value?: T\n): value is T {\n  if (!value) return false;\n  return Object.values(value).some(entry => {\n    if (entry === undefined || entry === null) return false;\n    return typeof entry === 'string' ? entry.trim().length > 0 : true;\n  });\n}\n","import type { AgentMeta } from '@lucid-agents/types/a2a';\n\n/**\n * Validates required agent metadata and throws descriptive errors if invalid.\n * @param meta - Agent metadata to validate\n * @throws Error if required fields are missing\n */\nexport function validateAgentMetadata(meta: AgentMeta): void {\n  const missingFields: string[] = [];\n  if (!meta.name) missingFields.push('name');\n  if (!meta.version) missingFields.push('version');\n  if (!meta.description) missingFields.push('description');\n\n  if (missingFields.length > 0) {\n    console.error(\n      '[agent-kit] Required agent metadata is missing:',\n      missingFields.join(', ')\n    );\n    throw new Error(\n      `Missing required agent metadata: ${missingFields.join(', ')}. ` +\n        `Please ensure AGENT_NAME, AGENT_VERSION, and AGENT_DESCRIPTION are set in your .env file.`\n    );\n  }\n}\n"]}