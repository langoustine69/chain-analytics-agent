import { Extension, EntrypointDef, AgentRuntime } from '@lucid-agents/types/core';
import { HttpExtensionOptions, AgentHttpHandlers } from '@lucid-agents/types/http';
export { AgentHttpHandlers, HttpExtensionOptions } from '@lucid-agents/types/http';

declare function http(options?: HttpExtensionOptions): Extension<{
    handlers: AgentHttpHandlers;
}>;

type InvokeResult = {
    output: unknown;
    usage?: {
        prompt_tokens?: number;
        completion_tokens?: number;
        total_tokens?: number;
    };
    model?: string;
};
/**
 * Internal invoke function that calls the handler.
 * Used by both HTTP invoke and tasks handler.
 */
declare function invokeHandler(entrypoint: EntrypointDef, rawInput: unknown, context: {
    signal: AbortSignal;
    headers: Headers;
    runId: string;
    runtime: AgentRuntime;
}): Promise<InvokeResult>;

type SSEWriteOptions = {
    event: string;
    data: string;
    id?: string;
};
type SSEStreamRunnerContext = {
    write: (options: SSEWriteOptions) => void;
    close: () => void;
    controller: ReadableStreamDefaultController<Uint8Array>;
};
type SSEStreamRunner = (ctx: SSEStreamRunnerContext) => Promise<void> | void;
declare const writeSSE: (controller: ReadableStreamDefaultController<Uint8Array>, options: SSEWriteOptions) => void;
declare const createSSEStream: (runner: SSEStreamRunner) => Response;

export { type InvokeResult, type SSEStreamRunner, type SSEStreamRunnerContext, type SSEWriteOptions, createSSEStream, http, invokeHandler, writeSSE };
