import { Hono } from 'hono';
import { AgentRuntime, CreateAgentAppReturn, EntrypointDef } from '@lucid-agents/types/core';
import { paymentMiddleware } from 'x402-hono';
import { FacilitatorConfig } from 'x402/types';
import { PaymentsConfig } from '@lucid-agents/types/payments';

type CreateAgentAppOptions = {
    /**
     * Hook called before mounting agent routes.
     * Use this to register custom middleware that should run before agent handlers.
     */
    beforeMount?: (app: Hono) => void;
    /**
     * Hook called after mounting all agent routes.
     * Use this to register additional custom routes or error handlers.
     */
    afterMount?: (app: Hono) => void;
};
declare function createAgentApp(runtime: AgentRuntime, opts?: CreateAgentAppOptions): Promise<CreateAgentAppReturn<Hono, AgentRuntime, AgentRuntime['agent']>>;

type PaymentMiddlewareFactory = typeof paymentMiddleware;
type WithPaymentsParams = {
    app: Hono;
    path: string;
    entrypoint: EntrypointDef;
    kind: 'invoke' | 'stream';
    payments?: PaymentsConfig;
    facilitator?: FacilitatorConfig;
    middlewareFactory?: PaymentMiddlewareFactory;
    runtime?: AgentRuntime;
};
declare function withPayments({ app, path, entrypoint, kind, payments, facilitator, middlewareFactory, runtime, }: WithPaymentsParams): boolean;

export { type CreateAgentAppOptions, type WithPaymentsParams, createAgentApp, withPayments };
